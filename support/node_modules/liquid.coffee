# Wrap liquid-node into liquify module
Liquid = require 'liquid-node'

Liquid.Partial = require 'liquid-partial'

# Provide browser-centric helper for registering all templates on a page

Liquid.Partial.registerTemplates = (rootElement=document) ->
  scripts = rootElement.getElementsByTagName 'script'

  return unless scripts and scripts.length

  addIfLiquid = (script) -> Liquid.Partial.registerTemplate(script.id, script.innerHTML) if script.type == 'text/liquid'
  
  addIfLiquid script for script in scripts

module.exports = Liquid